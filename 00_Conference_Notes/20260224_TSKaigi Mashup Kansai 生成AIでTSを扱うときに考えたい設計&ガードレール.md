# TSKaigi Mashup Kansai 生成AIでTSを扱うときに考えたい設計&ガードレール
- [https://typescript-jpc.connpass.com/event/382128/](https://typescript-jpc.connpass.com/event/382128/)
- 参加日：2026年2月24日（火）
- 19:00～21:30
- 参加形態：個人参加（プライベート）
- 現地：KINTOテクノロジーズ株式会社 Osaka Tech Lab
- ハッシュタグ ：#tskaigi_msup_kansai
# 目次
- 19:15〜19:30	ゲストスピーカーセッション：Make illegal states unrepresentable	恩田 崇
- 19:30〜19:40	セッション1：eslintをフル活用するガードレール	Kanon
- 19:50〜20:00	セッション2：高凝集と疎結合、純粋なドメイン層。設計思想をコードで強制してアーキテクチャをAIが破れないようにする	Shimmy
- 20:00〜20:10	セッション3：Docコメントで始める簡単ガードレール	Keisuke Ikeda
# ゲストスピーカーセッション：Make illegal states unrepresentable	恩田 崇
- スライド全部、自分で書いていない
- 構築できたこと自体がvalidの証明
- ハーネスエンジニアリング
  - 今月くらいから言われ出した
  - Open AIが2026年2月に提唱
  - 3つの柱
    - Context Engineering：プロンプト・ドキュメント構造
    - Architectual Constraints：型制約
    - Ge
- 契約を満たさない呼び出しは、プログラムの責任
- 型で不正な値を排除すれば、検証コードが不要になる
  - 本：Domain Modeling Made ～
  - 時代も背景も違うのに辿り着いた結論は同じ
- ガードレールの強さ
  - テスト：サンプルベースの検査。カバーしていないパスは通り抜ける
  - 型チェック：構造レベルの保証。すべてのパスをコンパイラが検査する
  - エージェントはテストを誤魔化せるが、
- 型の性質を活かすには
  - 型チェックは型と型の関係を確認している
- TypeScriptで使える道具
  - nominal type：構造が同じでも区別する
    - branded type：振る舞い無し
      - 一番手軽
    - class + #private：振る舞いあり
      - コンストラクタ引数の型が前のステップを強制する
      - メソッドの戻り値型が次のステップを示す
  - discriminated union
    - 直積型はoptionalフィールドでinvalidな組み合わせを許してしまう
    - これなら、各バリアントにvalidなフィールドだけ
  - フロントエンドとステートマシン
    - UI側で状態を絞り込まないとメソッドが呼べない
    - フロントエンドではデータがメモリに残り、様々なUI操作を受けて状態遷移し続ける
- なぜ今、型駆動設計か
  - 原理としては、正しいが大変
  - エージェントが簡単にやってうｋれる
    - この人8割の時間かけて、エージェントとプランモードで型グラフを設計する
      - どんな型が必要か、どう接続するかをエージェントと議論する
    - エージェントが型の制約内で実装する
    - セルフコードレビュー
# セッション1：eslintをフル活用するガードレール	Kanon
- 今や操縦席に座っているのは、コーディングエージェント！
  - 開発者はルールに違反しないようにコードを書くべき
  - ガードレール（ESLint）
- ESLint
  - なぜ開発中に検知すべきか
  - ファイル名の命名規則を強制するルール等
    - 名前に統一感が欲しい
  - eslint-import
    - 好みだが、同じ順番で並んでいてほしい
  - ２
    - モジュラーモノリスのアーキテクチャ境界保護に有効
  - no-restricted-imports
  - no-console
    - いっぱい使用しちゃった時に残っているとお知らせしてくれる
- AIであれ人間であれ、開発者が守るべきルールを守らせよう！！
- 自分が欲しいルールをAIに作らせることも以前より簡単になりました
  - この人Plugin自作している
# セッション2：高凝集と疎結合、純粋なドメイン層。設計思想をコードで強制してアーキテクチャをAIが破れないようにする	Shimmy
- 関心事で分ける
  - ある機能を修正したい時に分けやすい
  - 同時に操作してもコンフリクト起きにくい
- テスト容易性
  - 純粋関数はテストしやすい
- 依存方向の決定
  - 層ごとに「何に依存してよいか」が決まっている
- 設計を守る3つのルール
  - 純粋なドメイン層
    - domein層は、どの層にも依存しない（APIとかから依存されるのはOK）
  - Feature間の疎結合
    - あるFeatureから別のfeature1を直接importしてはいけない
    - 同一feature間はOK
  - Public API境界
    - index.tsを通さずにfeature
- 破られるルールから、
- なぜ「ルールを教える」だけでは足りないのか
- ガードレールとしての条件
  - 確定的である事
  - すぐ知りたい
- 静的解析
- 開発フロー
  - アウトプットではなく、プロセスを信頼できるものにする
# セッション3：Docコメントで始める簡単ガードレール	Keisuke Ikeda
- 複数行コメント
- 通常のコメントの違い
  - IDEを含む多くのツールの機能を補助
  - ツールを利用してドキュメントを生成可能
  - 基本的にメジャーな言語には定められた標準記法が存在する
- テストがドキュメント代わりになった
- クリーンなコードであれば、必要ない
- 書く理由
  - Docコメントで「意図」が分かる
  - 普通のコメントではダメなのか？
    - チーム内で書き方を共通化できる
      - 普通のコメントだと書き方がバラバラになりやすい
      - AIにコメントを書いてもらう場合、文体がバラバラになるが、Docコメントはお作法が決まっているので、あまりブレない
  - Docコメントはコードの隣にあるプロンプト
  - 導入コストゼロ
    - 環境構築も設定ファイルも不要
― Docコメントを書くコストもAIに任せる


