# 「支援」を止めない技術。虎ラボ | CAMPFIRE 開発の裏側をLT会！
- [https://connpass.com/event/361430/](https://connpass.com/event/361430/)
- 参加日：2025年12月5日（金）
- 19:00～32:00
- 参加形態：個人参加（プライベート）
- 対面
- 開催場所：大阪
- #開発の裏側LT会
# 参加目次
- 19:30	1枠目（虎ラボ：1700万人の使うシステムの心臓部を止めずに仕様変更をする）
- 19:45	2枠目（CAMPFIRE：ゲスト支援における認証状態管理で気を付けたこと）
- 20:00	3枠目（CAMPFIRE：フロントエンド分離、絶対に失敗できない現場から）
- 20:25	4枠目（虎ラボ：ジョブキューイングシステムの移行）
- 20:40	5枠目（CAMPFIRE：CAMPFIREが目指す社内のAI活用を育てていく仕組み）
- 20:55	6枠目（虎ラボ：FantiaチームへのAI導入のリアル）
# 企業紹介
## 日本コムシンク㈱
- 40周年
- コンサルティングやシステム開発、DX推進
- 教育は、ITとコンサルの両方を行っている
- 金融系企業に強い
- オフィスは、綺麗で小さ目
## 虎の穴ラボ
- 皆知っている「とらのあな」
- 勤務体系を分けるために分社化しました
  - フレックスタイム制・フルリモート体制
- キャラは、採用HPから手に入りますよー
- 社内勉強会・コラボ勉強会を沢山しています
- 全員、Mac
## CAMPFIRE
- クラウドファンティングの説明
- 累計流通金額1,030億円・累計プロジェクト10.8万件・530万人登録者
- 国内最大：48％
- 全員、Mac
# LT
# 虎ラボ：1700万人の使うシステムの心臓部を止めずに仕様変更をする
- 好きな作品は、無職転生～
- Fantia：1700万人
- 技術
  -　React・・
- 「一度退会しても、戻ってきたら以前の閲覧権限を引き継いでほしい」
  - 当時は、Geminiがバージョン1だったりした。
  - データ量がめっちゃ多い
- 1:「テーブル更新じゃダメ？」
  - A：DBがお亡くなりになります
    - 権限が月毎プラン毎
    - 9年間の歴史
    - 基本、サービス無停止で提供している
  - 2:「テーブル構成を変更したらダメ？」
    - できません⇒メンテナンスしたくないです。
- 3:「オンラインDBではダメなの？」
  - データが多すぎて危険です
- 解決
  - リファクタの諦め
  - 修正箇所の局所化
    - サービスを良く知るエキスパートに相談して、判定の肝を相談した
  - 徹底的なテスト
    - 単体テストを順次追加しながら、泥臭く頑張った
    - 人力で確認した
- 教訓
  - あえて「戦わない」ことにも勇気がいる
- Q&A：全体でどれくらい時間かかった？
  - 絶対やるぞと決めてから3ヶ月くらい
  - 絶対やるぞと決める前は、もっとあった（別の人が）
- Q：リファクタを諦めたのは、何処？
  - 月xプランを表したかったが、諦めた
# CAMPFIRE：ゲスト支援における認証状態管理で気を付けたこと
- ガチアクタにハマっています
- Ruby on Railsをメインで採用している
- 「支援を決めた時が一番熱意があり」⇒会員登録が進む毎に離脱していく
  - 未ログインで、支援を可能にした
  - iPhone/Safariのみで利用可能(´;ω;｀)
  - 「限定」とは言え、公開URLのため、メールアドレスなどの個人情報はマスクしている
- 気を付けたこと
  - 個人情報管理
    - リーガルチェックもお願いした
    - 最初から、法務に相談していて、待ち時間で要件詰めていった
  - Apple Payは事前のメール送達が担保されない事から、
  - 排他的に認証情報を引けるようにした（カレントユーザーとゲストトークン）
    - ゲスト認証状態とログイン認証状態の排他制御を行う
# CAMPFIRE：フロントエンド分離、絶対に失敗できない現場から
- 複雑なロジックが混在するように
- 複数サービスの共存
- Ruby on RailsからフロントエンドSvelteを分離するように
- すでに分離済みのページ
- 失敗した場合の影響
  - 2桁万人以上/日
  - 4桁万円以上/日
- PJ詳細ページ：立ちはだかった壁
  - パターンの多さ【最大の壁】
    - ブランド毎のパターンxプロジェクトの状態
  - 仕様の把握
    - 入社2年以内ばかりのため、都度古参（PdM・デザイナー）に確認して、鵜呑みにせずに意図を理解するようにした
  - API項目の肥大化
  - ABテストの整理
  - SEO対応
- 負荷試験
  - 1回目は考慮漏れして、
- 副産物：Admin管理画面の改善
- PJ決済ページの3つの大きな変更
  - 決済パラメータの型定義（Ｉ/Ｆ）作成
- FE側の改善成果
  - 開発体験の向上
  - 使用の明確化
  - ユーザー体験の改善（支払方法による個数制限が解消：過去は必要だったが、今はそれ必要ない事を見つけた）
- BE側の改善成果
  - （Ｉ/Ｆ）作成
  - パフォーマンスの改善
    - PJ詳細ページ：約1.5倍～2倍
- Q&A：UIが膨大・どうやって整理した
  - デザイナーがFigmaやエンジニアがNotion
# 虎ラボ：ジョブキューイングシステムの移行
- 
# CAMPFIRE：CAMPFIREが目指す社内のAI活用を育てていく仕組み
# 虎ラボ：FantiaチームへのAI導入のリアル
