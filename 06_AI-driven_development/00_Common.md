【整理前】
#
チェック項目
確認内容
1
目的が明確か
「なぜこのシステムを作るのか」が明文化されているか
2
対象ユーザーが具体的か
「誰が使うのか」「利用シーン」が明確か
3
機能が漏れなく整理されているか
コア機能・補助機能が一覧化されているか
4
定量的な基準があるか
「速い」「便利」などの曖昧語が数値・条件で置き換えられているか
5
非機能要件が含まれているか
性能・セキュリティ・運用・拡張性などが明記されているか
6
関係者間で合意されているか
顧客・開発・デザインなど全員の承認が取れているか
7
変更に強い構成か
機能や要件の追加に対応できる書き方になっているか


Claude Code に自分の要件定義を貼り付けて、次のようにレビュー依頼をするのもおすすめです。
「以下の要件定義をチェックリストに沿って評価してください。
曖昧な点や不足している部分があれば指摘してください。」
Claude Code は、次のような形でフィードバックを返します。
Claude.md
✅ 目的とユーザー像は明確です。 
 ⚠️ 「レスポンスが速い」という表現を数値化するとより良いです。 
 ⚠️ 非機能要件にセキュリティ項目（通信暗号化など）が抜けています。 
 ✅ 機能一覧の整理が適切です。
このように、AIを「レビューア」として使うことで、要件の品質を早期に高めることができます。

# 要件定義チェックリスト

- [ ] 目的は明確に書かれている
- [ ] 対象ユーザーが具体的に定義されている
- [ ] 各機能の目的・理由が説明できる
- [ ] 非機能要件（性能・セキュリティ・運用）を含んでいる
- [ ] 曖昧な表現が残っていない
- [ ] チーム全員が内容を承認している
- [ ] 今後の拡張を考慮した構成になっている


💡 このテンプレートは
ファイルとして保存し、プロジェクトの docs/requirements フォルダに置くのがおすすめです。

Claude Codeで最終レビューを行う流れ
要件定義書を Claude Code に貼り付ける
「チェックリストに沿ってレビューしてください」と依頼
指摘を反映して再度確認
「これで問題ないですか？」と最終確認
Claude Codeは、文章のあいまいさ・重複・抜け漏れを見つけるのが得意です。
チーム内のレビュー前にAIレビューを挟むと、全体の精度が高まります。

# 基本設計（ドラフト）

## 画面構成
- /login：ログイン画面
- /dashboard：進捗一覧
- /task/[id]：タスク詳細

## データ構造
| フィールド | 型 | 説明 |
|-------------|----|------|
| id | string | タスクID |
| title | string | タスク名 |
| progress | number | 進捗率 |
| userId | string | ユーザーID |

## API概要
- GET /api/tasks：タスク一覧取得
- POST /api/tasks：タスク登録
- PATCH /api/tasks/[id]：タスク更新

# 詳細設計：POST /api/tasks

## 入力項目
| フィールド | 型 | 必須 | バリデーション |
|-------------|----|------|----------------|
| title | string | ○ | 1〜50文字 |
| progress | number | ○ | 0〜100 |
| userId | string | ○ | UUID形式 |

## 処理フロー
1. 入力データをバリデーション
2. Supabase にレコード登録
3. 成功時に201を返す
4. 失敗時に400/500エラーを返す

## レスポンス
```json
{
  "id": "uuid",
  "title": "JavaScript学習",
  "progress": 80,
  "userId": "user-001"
}
```

ーン
Claude Codeを設計で使う場合、段階的に依頼するのが効果的です。
ステップ
目的
Claude Codeへの依頼例
① 基本設計
構造の骨格を作る
「Next.js構成で基本設計を作って」
② 詳細設計
実装レベルに落とす
「POST /api/tasks の詳細設計を書いて」
③ レビュー
書いた設計の妥当性を確認
「この設計に不備がないかレビューして」
Claude Codeは「仕様を言語化する」点で非常に得意なので、
初学者でも明確な設計ドキュメントを素早く作成できます。


5. 画面設計チェックリスト
画面設計が完了したら、次の項目でセルフチェックしてみましょう。
チェック項目
内容
✅ 必要な画面がすべて網羅されているか

✅ 画面遷移が自然で迷わないか

✅ 各画面の目的が明確になっているか

✅ 同じ要素の配置・デザインが一貫しているか

✅ エラー・完了などの状態別表示が定義されているか

Claude Codeに「この画面設計をレビューしてください」と依頼すると、改善提案も得られます。
6. Claude Code活用のコツ
Claude Codeを「設計レビュー支援ツール」として使うのもおすすめです。
💬 プロンプト例
「以下の画面設計をレビューしてください。
操作フローやUI構成の抜け漏れを指摘してください。」
Claude Codeは次のようなコメントを返します。
Claude.md
⚠️ フロー内に“キャンセル時の遷移先”が未定義です。 
 ✅ 画面構成は簡潔で理解しやすいです。 
 💡 ダッシュボードのフィルタ機能を追加すると利便性が上がります。


1. API設計とは？
API（Application Programming Interface）は、システム同士をつなぐ「データの入り口・出口」です。
API設計では、以下の3点を明確にします。
項目
内容
エンドポイント
どのURLで操作を行うか（例：/api/tasks）
メソッド
どんな操作をするか（GET / POST / PATCH / DELETE）
I/O（Input/Output）
送信・受信するデータの構造
💡 ここを曖昧にすると、フロントとバックで「データ形式が合わない」などの不具合が起きやすくなります。

2. API設計の基本構成
学習管理アプリを例に、主要APIを整理してみましょう。
操作
エンドポイント
メソッド
入力（Request）
出力（Response）
タスク一覧取得
/api/tasks
GET
なし
タスク配列
タスク登録
/api/tasks
POST
title, deadline
登録済みタスク
タスク更新
/api/tasks/[id]
PATCH
id, progress
更新後タスク
タスク削除
/api/tasks/[id]
DELETE
id
削除結果（200）
Claude Code に次のように入力すると、API設計の下書きを自動生成できます。
「学習管理アプリのAPI設計を作成してください。
エンドポイント、HTTPメソッド、入出力構造をMarkdownで出力してください。」
3. Claude Codeによる出力例
Claude.md
# API設計（ドラフト）

## GET /api/tasks
- 概要：タスク一覧を取得 
 - Request：なし 
 - Response：
```json
[
  {
    "id": "task-001",
    "title": "React学習",
    "progress": 80,
    "deadline": "2025-10-15"
  }
]
```

## POST /api/tasks
- 概要：新規タスクを登録 
 - Request：
```json
{
  "title": "Next.js学習",
  "deadline": "2025-10-20"
}
```
- Response：
```json
{
  "id": "task-002",
  "title": "Next.js学習",
  "progress": 0,
  "deadline": "2025-10-20"
}
```
Claude Codeは、要件定義やER図をもとに適切なフィールド構成を自動提案します。
4. API設計のポイント
観点
チェック内容
命名規則
RESTfulに統一（例：/api/tasks）
一貫性
同じデータ構造は常に同じ形式で返す
最小限のI/O
不要なデータを含めず、必要な項目だけ送受信
エラー処理
エラーレスポンス（400, 404, 500）を設計段階で定義
セキュリティ
認証（JWTなど）を考慮し、機密データは返さない
5. Claude Codeでのレビュー例
Claude Codeに次のように入力して、API設計のチェックも行えます。
「以下のAPI設計をレビューしてください。
命名規則・整合性・セキュリティの観点から改善点を指摘してください。」
出力例：
Claude.md
✅ 命名規則はRESTfulに準拠しています。 
 ⚠️ DELETEエンドポイントに認証チェックが不足しています。 
 💡 PATCHでは`id`をパラメータで受け取るため、Request Bodyから削除してもよいです。
6. API設計チェックリスト
チェック項目
内容
✅ エンドポイントが一貫した命名規則である

✅ 入出力データの形式が明確

✅ エラーレスポンスが定義されている

✅ 認証・権限の考慮がある

✅ 将来的な拡張（v1/v2対応など）に備えている




1. なぜAIに機密情報を入力してはいけないのか
Claude Codeを含むAI開発支援ツールは、入力内容を一時的に処理・分析する仕組みを持っています。 そのため、APIキーや個人情報を含むデータを入力すると、AIのログに残る可能性があるのです。
入力例（NG）
問題点
「この.envの内容を改善して」＋ .env全文貼り付け
秘密キーがそのままAI側に送信される
「このAPIキーで接続できない」＋ 実キーを記述
第三者が利用できる状態になる
💡 Claude CodeなどのAIは、出力データを再利用しない設計ですが、
入力した情報は「送信済みのテキスト」として残ります。
秘密鍵はAIにも見せないが鉄則です。
2. 機密情報とは何か
AIツールに入力してはいけない情報には、以下のようなものがあります。
種類
例
認証情報
APIキー、JWTトークン、OAuthクライアントID・シークレット
サーバー情報
接続URL、データベース名、パスワード
個人情報
メールアドレス、ユーザーID、氏名、住所
内部情報
社内ドキュメント、非公開仕様、契約書内容
Claude Codeに質問する場合は、実データではなく構造の例示を使いましょう。
3. 安全な共有の仕方
Claude CodeにAPIや環境変数を説明したい場合は、
具体的な値ではなく変数名だけを使います。
OK例：
.env.local.env
NEXT_PUBLIC_API_BASE_URL=https://api.example.com
API_KEY={YOUR_API_KEY}
SUPABASE_URL={YOUR_SUPABASE_URL}
NG例（危険）
.env.local.env
NEXT_PUBLIC_API_BASE_URL=https://api.example.com
API_KEY=sk-1234567890abcdef
SUPABASE_URL=https://xyz.supabase.co
Claude Codeに依頼するときは、「変数の役割」や「構成の説明」にとどめましょう。
4. Claude Codeへの依頼例（安全版）
Claude Codeに環境設定の相談をするときは、次のように伝えます。
この.env.localファイルの構成が正しいか確認してください。
ただし、実際の値は入れていません。
各キーの用途と命名ルールをチェックしてください。

Claude Code出力例：
Claude.md
✅ `NEXT_PUBLIC_` プレフィックスは正しいです。 
 ⚠️ `SUPABASE_KEY` は公開しないよう `.env.local` に保持してください。 
 💡 `.gitignore` に `.env.local` が含まれていることを確認しましょう。
5. .envファイルとGitの連携
環境変数ファイル（.env.localなど）は、Gitで管理しないのが原則です。
以下のように .gitignore に追記しておきましょう。
.gitignore.sh
# 環境変数ファイル
.env
.env.local
.env.production
Claude Codeに「.gitignore設定を確認して」と依頼すれば、
環境変数漏えいを防ぐためのチェックリストも生成してくれます。
6. Claude Codeを使ったセキュリティチェック
Claude Codeは安全管理にも活用できます。
次のような依頼をして、機密情報が含まれていないか自動確認しましょう。
このリポジトリの内容に機密情報（APIキーやパスワード）が含まれていないか確認してください。
見つかった場合は、該当箇所と対処法を出力してください。

Claude Code出力例：
Claude.md
⚠️ `lib/config.ts` に `SUPABASE_KEY` がハードコードされています。 
 💡 `.env.local` に移動し、`process.env.SUPABASE_KEY` を参照するように修正してください。
7. チェックリスト：AI利用時の安全対策
チェック項目
状況
.env.local をGitに含めていない
✅
Claude CodeにAPIキーを入力していない
✅
構成例はダミー値で説明している
✅
Claude Codeに安全チェックを依頼している
✅
8. まとめ
このユニットでは、AI利用時の機密情報管理の基本を学びました。
Claude CodeなどのAIにAPIキー・秘密情報を入力しない
.envファイルは常にGit管理外に置く
Claude Codeでセキュリティチェックを自動化できる

⇒GitHubの履歴も削除する必要あり


5. テスト自動化と品質向上のためのAI活用
このチュートリアルでは、AIとテスト自動化ツールを活用して、ソフトウェアの品質を向上させる方法を学びます。
AI技術を使うことで、E2Eテストの記述効率を上げたり、バグの早期発見ができるようになります。ここでは主に「Playwright」と「Cursor（AI支援エディタ）」を使った実践を行います。
前提条件
このチュートリアルを進めるにあたって、以下の環境が必要です。
Node.js（バージョン18以上）
Playwrightのインストール
Cursorエディタがインストール済み（任意）
Playwrightのインストール手順
install.sh
npm install -D playwright
npx playwright install
テスト自動化とAIの役割
テスト自動化とは？
テスト自動化は、ソフトウェアの動作確認をスクリプトで繰り返し実行できるようにする仕組みです。
E2E（End-to-End）テストでは、実際にブラウザを操作して「ユーザーがどう動くか」を検証できます。
AIがどう活躍するの？
AIツール（例：Cursor）を使うことで、以下のような支援を受けながらテストコードを作成できます。
テストコードのひな形を提案してくれる
バグやタイポの可能性を指摘してくれる
コメントからテスト処理を生成してくれる
実施手順
1. PlaywrightでE2Eテストを記述する
以下のコードは、https://example.com にアクセスし、リンクをクリックしてページタイトルを確認するE2Eテストです。
example.spec.js.js
const { test, expect } = require('@playwright/test');

test('Example site has correct title after navigation', async ({ page }) => {
  await page.goto('https://example.com');
  await page.click('text=More information');
  await expect(page).toHaveTitle(/Example Domain/);
});
このコードは VSCode や Cursor 上で記述しても構いません。

Cursor を使えばコメント補完やテスト記述のサジェストが表示され、記述ミスを防ぐことができます。
2. テストの実行
以下のコマンドでテストを実行します。
run_test.sh
npx playwright test example.spec.js
3. AI補完による修正支援（Cursor）
Cursor を使って上記のコードを編集するとき、以下のような支援が得られます：
test(...) を書き始めた時点でひな形が自動補完される
expect(...) の中身の候補を提案してくれる
コメント // このテストではタイトルを確認する からコードを自動生成してくれる
出力結果
出力結果
Running 1 test using 1 worker
  ✓  example.spec.js:3:1 › Example site has correct title after navigation (1s)
  1 passed
補足
Cursor の補完が動かない場合は GitHub 連携が有効か確認してください
Playwright の await expect(page).toHaveTitle(...); は非同期検証なので、適切な await を忘れないようにしましょう
まとめ
このレッスンでは、PlaywrightによるE2EテストとCursorによるAI補助を組み合わせて、テストコードの自動化と品質向上を体験しました。
AIを活用することで、テストケースの記述ミス削減や開発効率の向上が期待できます。


5. Mermaidで画面遷移図を描く
このチュートリアルでは、Mermaidを使って画面遷移図を描く方法を学びます。Mermaidは、Markdown形式で簡単に図を描けるツールで、特に開発者にとって便利です。この記事を通じて、画面遷移図の基本的な描き方を習得しましょう。
画面遷移図とは
画面遷移図は、アプリケーション内の画面間の移動を視覚的に示した図です。これにより、ユーザーがどのようにアプリケーションを操作するかを理解しやすくなります。
Mermaidとは
Mermaidは、Markdown形式でフローチャートやシーケンス図、ガントチャートなどを描くことができるツールです。特に、開発者がドキュメント内で簡単に図を描くのに役立ちます。Mermaidを使うことで、テキストベースで図を管理でき、バージョン管理にも適しています。
利点
簡単に図を描ける: テキストベースで記述するため、手軽に図を作成できます。
バージョン管理が容易: テキストファイルとして管理できるため、Gitなどでのバージョン管理が簡単です。
多様な図をサポート: フローチャート、シーケンス図、ガントチャートなど、さまざまな図を描けます。
Mermaidファイルの作成
ここでは、生成AIでMermaidコードを作り、それをNotionへ貼り付けて図を確認するための手順を解説していきます。
1. AIにMermaidコードを作ってもらう
まず、生成AI（例：ChatGPT）に以下のようなプロンプトを渡して、Mermaidコードを生成してもらいます。
コード例.text
以下のアプリの画面遷移図をMermaidで作成してください。
説明・コメント・Markdown記号などは一切不要です。
 【アプリ概要】
 - ホーム画面
 - ログイン画面
 - 会員登録画面
 - ダッシュボード
 - 設定画面
 - ログアウト
 
条件：
 - ホームからログインまたは会員登録へ遷移
 - ログイン後はダッシュボードへ
 - ダッシュボードから設定画面とログアウトへ遷移

以下のようなMermaidコードを出力してくれます
screen-flow.mmd.md
graph TD;
 A[ホーム画面] --> B[ログイン画面];
 A --> C[会員登録画面];
 B --> D[ダッシュボード];
 C --> D[ダッシュボード];
 D --> E[設定画面];
 D --> F[ログアウト];
2. Mermaidコードを貼り付けて図を表示する
それでは作成したMermaidファイルを使って、Mermaidコードを貼り付けていきましょう。
今回はMermaidライブエディターを使っていきますが、以下のNotionでも確認は可能です。
1.https://mermaid.live/ にアクセスしてMermaidライブエディターを開く
2.左側にコード、右側に図がリアルタイムで出るので
左側にMermaidコードを貼り付ける
ヒント
右上の共有からリンク共有する事も可能です。ログイン or サインアップするとPNG / SVG / PDF / Markdown等のエクスポートも可能です。

以下はNotionでの実行方法です。
Notionとは
Notionは、メモ、タスク管理、データベースなどをひとつの場所で扱えるオールインワンの情報管理ツールです。チームでも個人でも、アイデアや資料を整理・共有するのに便利です。
1.https://www.notion.com/ja にアクセスしてNotionを開く
2.ログイン or サインアップを完了させる
3.画面左の+ボタンを押下して新しいページを追加する
4.タイトルにカーソルがある状態なので、Mermaidファイル作成などのタイトルを入力する
5.その下にカーソルを移動して /codeと入力すると、候補が出てくるので、<>コード を選択する
6.表示された枠の中にAIで生成したコードを挿入する
7.右上にある項目をMermaidに変更する
