# AI Builders Day Online (プレイベント)参加メモ
- 公式HP[https://jawsug.connpass.com/event/375739/](https://jawsug.connpass.com/event/375739/)
- 参加日：2025年11月27日（木）
- 20:00～21:30
- 参加形態：個人参加（プライベート）
- オンライン
- 月1の情報交換会
# 目次
| 時刻 | コンテンツ | 登壇者（敬称略） |
|------|-----------|------|
| 19:05-19:25 | 私なりのAIエージェントの理解と開発ツールの選び方 | 佐藤 碧（株式会社エクサウィザーズ） |
| 19:25-19:45 | Amazon Bedrock AgentCore 本番導入への道 アーキテクチャ設計の実践 | 神野 雄大（クラスメソッド株式会社） |
| 19:45-20:05 | S3 VectorsとStrands Agentsを利用したAgentic RAGシステムの構築 | とすり（エムオーテックス株式会社） |
| 20:10-20:20 | AgentCoreによるキャラクター管理システムガイド | 頼 展韜（株式会社バンダイナムコ研究所） |
| 20:20-20:30 | Mastra × Bedrock AgentCore × x402準拠の次世代金融エージェントを作ってみよう！ | Haruki（Web3エンジニアコミュニティUNCHAIN） |
| 20:30-20:50 | 全部をAIエージェントにしない設計：AWS Step Functions × Amazon Bedrock AgentCore × Strands Agents Multiagent Graphで不確実性を考慮するワークフロー | 佐藤 礼央奈/大宮 佑仁 (株式会社Fusic) |

# 私なりのAIエージェントの理解と開発ツールの選び方
- AIエージェントとは（前提としてLLMが組み込まれている）
  - ワークフロー
  - エージェント
- LangGraphの考え方が分かりやすかった
  - （話者）開発者が判断ロジックを決めているのをワークフローと理解した
  - （話者）エージェントはLLMが判断している
- Tool use：LLMの揺らぎがある判断を「構造化されたデータ」として受け取る
  - 必須ではないが、開発者がtool_callsを見るだけで分岐判断が簡単にできる
  - 例：Strands Agents, Mastra（マストラ）
- 暗黙的にグラフを定義する事もある（プログラミング言語を用いて）
- ノードの一部をエージェントにする
  - 例：LangGraph, Mastra（マストラ）
- 全てのノードをエージェントにする
  - 例：Strands Graph
- まとめ役エージェントがいる
  - 例：Strands Agent as Tools
- エージェントみんなで考える
  - 例：Strands Swarm
- フレームワーク選定
  - システムをコントロールしたい
  - 開発期間の長さ
 # Amazon Bedrock AgentCore 本番導入への道 アーキテクチャ設計の実践
 - Amazon Bedrock AgentCoreが好き
   - マネージド
 - Runtimeエンドポイントの活用
   - デプロイする度にバージョンが上がっていく（デフォルトのエンドポイント）
   - 名前付きエンドポイントも作成可能で、特定バージョンを指定する事も可能＝本番でも安心。検証してから、最新に移動
   - 通常デプロイ：リクエストを送るのにARN部分をエンコードしたり、アカウントIDが見える
     - AgentCore Runtimeの前段にCloudFrontをラップしてリクエストを受けることも可能⇒カスタムドメイン・WAFの利用なども可能になる
     - 更にLamdaを入れたり。
     - CloudFrontの代わりにAPI Geteway（ストリーミング応答に対応したので）を使用したり
 - Amplify・AppRunnerは、マネージドだが、AIアプリと相性が悪い機能もある
 - Runtimeには、アイドル時のタイムアウト（900秒）と最大稼働時間（8時間）パラメーターが存在し、セッションの自動終了タイミングを制御できます
 - Amazon Bedrock AgentCore Gateway
   - MCP Server自体をホストするものではない
   - 何に使う？
     - 100個以上とか沢山のツールの情報をAIエージェントが処理を毎回変更せずに適切に同期できる
- IAMの設定で人別にメモリーを使用できる
 # S3 VectorsとStrands Agentsを利用したAgentic RAGシステムの構築
 - 社内運用中のRAGシステムで課題が出た
 - 変更前：OpenSearch＋Amazon Bedrockを基盤
   - 課題1：OpenSearchの運用・開発コストが高い！
     - 最低スペックでも高い（使用されない夜間や休日の停止なども難しい）
     - カスタム処理が多く、Knowledge basesへの移行が難しかった
   - 課題2：柔軟な回答ができない
   - 検索と生成のフェーズが完全に分離されているため、情報が不十分なまま解答してしまう事がある
   - - ワークフロー通りのパターンにしか対応できない（ユーザー：こんにちは。LLM：関係する資料はありません。⇒怒り）
 - 変更後：
   - OpenSearch⇒「S3 Vectors」へ移行（運用コストへの対応策）
     - サーバーレスかつフルマネージドなベクトルストア（現在プレビュー版で、東京リージョンで利用不可）
     - 開発のコードも簡単
       - 色んな条件で検索可能
       - ※メタデータのみ検索はできないため注意
     - コストが97.5％削減された！！
     - ※1秒あたりの書き込みリクエスト数：最大5が厳しい。超えないように調整している。
   - Agentic RAGを使用
     - AIエージェントが自律的に検索の戦略を立てて、ツールの実行結果に基づいたサイクルを回す（ベクターorSQL等を考える）
     - Strands Agents：AWSが開発しているAIエージェントのフレームワーク
     - ※消費するトークンの量が大幅に上昇する
     - ※基盤モデルにBedrockを採用している場合は、レート制限に抵触する可能性がある（ツールレベルでコンテキストを制限した方が良い）
 - 社内運用や個人レベルであれば、S3 Vectorsからがオススメ
 # AgentCoreによるキャラクター管理システムガイド
 - バンダイナムコの人
 - キャラクター管理システム
   - キャラクターのロールプレイングは「指示遵守」から「AIで役作り」の時代へ
   - 先行研究が提案したフレームワーク1例：
     - 複数のキャラクター分析
       - 感情分析等
       - キャラクター情報を読み込む
       - 条件のプロンプト分析
    - シーン分析から行動方針へ
      - 背景ｘ人間関係⇒行動指針
      - 感情ｘ葛藤⇒発話指針
- 「凄いキャラを作って、そいつが動くのに任せてください」の実現に向けて
  - 認知科学
  - 社会心理学
  - 行動科学
  - LLM
  - 言語学
  - 統計学
- （話者）今の所感だと、プロンプトエンジニアリングは、要約されちゃうので、個別エージェントを使用した方が成績が良い
 # Mastra × Bedrock AgentCore × x402準拠の次世代金融エージェントを作ってみよう！
 - 「x402」：HTTPステータスコード402
   - 特定のエンドポイントにアクセスする際にステーブルコイン決済処理を挟み込める
   - 簡単に言うと、APIの有料化が簡単にできる
   - 最近できたエラーコード
 # 全部をAIエージェントにしない設計：AWS Step Functions × Amazon Bedrock AgentCore × Strands Agents Multiagent Graphで不確実性を考慮するワークフロー
 - 前職：陸上自衛隊のシステム部隊Σ（・□・；）
 - 紙のアンケートを集計して可視化したい
   - PDFをアップロードすると、集計結果がダッシュボードになる
   - 静的なワークフロー：Step Function
     - １：PDFファイルを分割
     - ２：MAP:UpstageのUniversal Information Extraction使用（JSON形式で取得）
     - 途中
   - 文章の解釈が必要:Strands Agents
     - 誤字修正(NG繰り返し)⇒感情分類(NG繰り返し)⇒is_postive追記⇒スキーマ検証（最終的なバリデーション/NG最初に戻る）
